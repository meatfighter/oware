(()=>{"use strict";var e={839:(e,s,t)=>{var h,r,i;t.d(s,{Jq:()=>r,OF:()=>a}),function(e){e[e.A=1]="A",e[e.B=-1]="B"}(h||(h={})),function(e){e[e.INTERMEDIATE=0]="INTERMEDIATE",e[e.DRAW=1]="DRAW",e[e.A_WON=2]="A_WON",e[e.B_WON=3]="B_WON"}(r||(r={})),function(e){e[e.RESET=0]="RESET",e[e.SOWED=1]="SOWED",e[e.CAPTURED_REMAINDER=2]="CAPTURED_REMAINDER"}(i||(i={}));class a{static PERMUTATIONS=[];static{!function e(s=[],t=0,h=new Array(6).fill(!1)){if(6===t)a.PERMUTATIONS.push(s.slice());else for(let r=0;r<6;++r)h[r]||(h[r]=!0,s[t]=r,e(s,t+1,h),h[r]=!1)}()}parent;houses;scoreA;scoreB;hash;type;heuristicValue;createPlayer;createOperation;createSownHouse;createCaptured;constructor(e=null){null===e?(this.parent=null,this.houses=new Array(12).fill(4),this.scoreA=0,this.scoreB=0,this.hash=0,this.type=r.INTERMEDIATE,this.heuristicValue=0,this.createPlayer=h.B,this.createOperation=i.RESET,this.createSownHouse=-1,this.createCaptured=!1):(this.parent=e,this.houses=e.houses.slice(),this.scoreA=e.scoreA,this.scoreB=e.scoreB,this.hash=e.hash,this.type=e.type,this.heuristicValue=e.heuristicValue,this.createPlayer=e.createPlayer,this.createOperation=e.createOperation,this.createSownHouse=e.createSownHouse,this.createCaptured=e.createCaptured)}children(){if(this.type!==r.INTERMEDIATE)return[];const e=this.createPlayer===h.B?0:6,s=[],t=a.PERMUTATIONS[Math.floor(Math.random()*a.PERMUTATIONS.length)];for(let h=5;h>=0;--h){const r=this.attemptSow(e+t[h]);null!==r&&s.push(r)}if(0===s.length){const e=new a(this);e.createPlayer=-this.createPlayer,e.createOperation=i.CAPTURED_REMAINDER,e.createSownHouse=-1,e.createCaptured=!1;for(let s=11;s>=6;--s)e.scoreB+=e.houses[s],e.houses[s]=0;for(let s=5;s>=0;--s)e.scoreA+=e.houses[s],e.houses[s]=0;e.determineHashTypeAndHeuristicValue(),s.push(e)}else this.createPlayer===h.A?s.sort(((e,s)=>e.heuristicValue-s.heuristicValue)):s.sort(((e,s)=>s.heuristicValue-e.heuristicValue));return s}attemptSow(e){if(0===this.houses[e])return null;const s=new a(this);s.createPlayer=-this.createPlayer,s.createOperation=i.SOWED,s.createSownHouse=e,s.createCaptured=!1;let t=s.houses[e];s.houses[e]=0;let r=e;for(;t>0;)++r>11&&(r=0),r===e&&++r>11&&(r=0),--t,++s.houses[r];if(s.createPlayer===h.A){if(r>=6){for(;r>=6&&(2===s.houses[r]||3===s.houses[r]);)s.houses[r]=-s.houses[r],--r;let e=0;for(let t=11;t>=6;--t)s.houses[t]<=0&&++e;if(6===e)for(let e=11;e>=6;--e)s.houses[e]<0&&(s.houses[e]=-s.houses[e]);else for(let e=11;e>=6;--e)s.houses[e]<0&&(s.scoreA-=s.houses[e],s.houses[e]=0,s.createCaptured=!0)}for(let e=11;e>=6;--e)if(0!==s.houses[e])return s.determineHashTypeAndHeuristicValue(),s.checkThreefoldRepetition(),s}else{if(r<6){for(;r>=0&&(2===s.houses[r]||3===s.houses[r]);)s.houses[r]=-s.houses[r],--r;let e=0;for(let t=5;t>=0;--t)s.houses[t]<=0&&++e;if(6===e)for(let e=5;e>=0;--e)s.houses[e]<0&&(s.houses[e]=-s.houses[e]);else for(let e=5;e>=0;--e)s.houses[e]<0&&(s.scoreB-=s.houses[e],s.houses[e]=0,s.createCaptured=!0)}for(let e=5;e>=0;--e)if(0!==s.houses[e])return s.determineHashTypeAndHeuristicValue(),s.checkThreefoldRepetition(),s}return null}checkThreefoldRepetition(){e:{for(let e=11;e>=6;--e)if(this.houses[e]>0)break e;return}e:{for(let e=5;e>=0;--e)if(this.houses[e]>0)break e;return}let e=this.parent,s=0;for(;null!==e&&e.scoreA===this.scoreA&&e.scoreB===this.scoreB;){e:if(e.createPlayer===this.createPlayer&&e.hash===this.hash){for(let s=11;s>=0;--s)if(e.houses[s]!==this.houses[s])break e;if(3==++s){this.createOperation=i.CAPTURED_REMAINDER;for(let e=11;e>=6;--e)this.scoreB+=this.houses[e];for(let e=5;e>=0;--e)this.scoreA+=this.houses[e];return void this.determineHashTypeAndHeuristicValue()}}e=e.parent}}determineHashTypeAndHeuristicValue(){const e=this.scoreA<<24|this.houses[3]<<18|this.houses[2]<<12|this.houses[1]<<6|this.houses[0],s=this.scoreB<<25|this.houses[7]<<19|this.houses[6]<<13|this.houses[5]<<7|this.houses[4]<<1,t=this.houses[11]<<21|this.houses[10]<<15|this.houses[9]<<9|this.houses[8]<<3;this.hash=e^s^t,this.heuristicValue=200*(this.scoreA-this.scoreB),24===this.scoreA&&24===this.scoreB?this.type=r.DRAW:this.scoreA>24?(this.type=r.A_WON,this.heuristicValue+=1e4):this.scoreB>24?(this.type=r.B_WON,this.heuristicValue-=1e4):this.type=r.INTERMEDIATE;for(let e=11;e>=6;--e)switch(this.houses[e]){case 0:this.heuristicValue+=10;break;case 1:this.heuristicValue+=20;break;case 2:this.heuristicValue+=30}for(let e=5;e>=0;--e)switch(this.houses[e]){case 0:this.heuristicValue-=10;break;case 1:this.heuristicValue-=20;break;case 2:this.heuristicValue-=30}for(let e=10;e>=6;--e)this.houses[e]<=2&&this.houses[e+1]<=2&&++this.heuristicValue;for(let e=4;e>=0;--e)this.houses[e]<=2&&this.houses[e+1]<=2&&--this.heuristicValue}pad(e){return e<10?`0${e}`:`${e}`}toString(){return`   ${this.pad(this.houses[11])} ${this.pad(this.houses[10])} ${this.pad(this.houses[9])} ${this.pad(this.houses[8])} ${this.pad(this.houses[7])} ${this.pad(this.houses[6])}\n${this.pad(this.scoreB)}                   ${this.pad(this.scoreA)}\n   ${this.pad(this.houses[0])} ${this.pad(this.houses[1])} ${this.pad(this.houses[2])} ${this.pad(this.houses[3])} ${this.pad(this.houses[4])} ${this.pad(this.houses[5])}`}}}},s={};function t(h){var r=s[h];if(void 0!==r)return r.exports;var i=s[h]={exports:{}};return e[h](i,i.exports,t),i.exports}t.d=(e,s)=>{for(var h in s)t.o(s,h)&&!t.o(e,h)&&Object.defineProperty(e,h,{enumerable:!0,get:s[h]})},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e=t(839);class s{cancelled=!1}const h=1e5;class r{value=0;bestChild=null;outcome=e.Jq.INTERMEDIATE}var i;!function(e){e[e.ENTERED=0]="ENTERED",e[e.BEFORE=1]="BEFORE",e[e.AFTER=2]="AFTER"}(i||(i={}));class a{node=new e.OF;alpha=0;beta=0;children=[];value=0;bestChild=null;outcome=e.Jq.INTERMEDIATE;i=0;state=i.ENTERED}const o=new Array(32).fill(null).map((()=>new a));async function l(s,t,a){const l=o[t];l.node=s,l.alpha=-1/0,l.beta=1/0,await async function(s,t){const r=s;o[s].state=i.ENTERED;let a=h;for(;s<=r&&(0!=--a||(a=h,await new Promise((e=>setTimeout(e,0))),!t.cancelled));){const t=o[s];switch(t.state){case i.ENTERED:if(0===s||t.node.type!==e.Jq.INTERMEDIATE){t.value=-t.node.createPlayer*t.node.heuristicValue,t.outcome=t.node.type,t.bestChild=null,++s;continue}t.children=t.node.children(),t.value=-1/0,t.bestChild=null,t.outcome=e.Jq.INTERMEDIATE,t.i=0,t.state=i.BEFORE;break;case i.BEFORE:{if(t.i===t.children.length){++s;continue}const e=o[--s];e.node=t.children[t.i++],t.state=i.AFTER,e.state=i.ENTERED,e.alpha=-t.beta,e.beta=-t.alpha;break}case i.AFTER:{const e=o[s-1];if(-e.value>t.value&&(t.value=-e.value,t.bestChild=e.node,t.outcome=e.outcome),t.alpha=Math.max(t.alpha,t.value),t.alpha>=t.beta){++s;continue}t.state=i.BEFORE;break}}}}(t,a);const n=new r;return n.bestChild=l.bestChild,n.value=l.value,n.outcome=l.outcome,n}var n;!function(e){e[e.SEARCH_MANY=0]="SEARCH_MANY",e[e.SEARCH_NARROW=1]="SEARCH_NARROW",e[e.SEARCH_RESPONSE=2]="SEARCH_RESPONSE",e[e.CANCEL_ALL=3]="CANCEL_ALL"}(n||(n={}));class u{type=n.SEARCH_RESPONSE;results;requestID;constructor(e,s){this.results=e,this.requestID=s}}class c{searchManyRequest;canceller=new s;cancelled;results;nodeIndex=0;constructor(e){this.searchManyRequest=e,this.cancelled=new Array(e.nodes.length).fill(!1),this.results=new Array(e.nodes.length).fill(null)}}const d=[];let E=!1;onmessage=async s=>{const t=s.data;switch(t.type){case n.SEARCH_MANY:await async function(s){if(function(s){if(0===s.length)return;let t=function(s){let t=null,h=null;for(;null!==s.parent;)if(s=s.parent,null===h)h=t=new e.OF(s),h.parent=null;else{const t=new e.OF(s);t.parent=null,h.parent=t,h=t}return t}(s[0]);for(let h=s.length-1;h>=0;--h)s[h]=new e.OF(s[h]),s[h].parent=t}(s.nodes),d.push(new c(s)),!E){for(E=!0;d.length>0;){const e=d[0];if(e.nodeIndex<e.searchManyRequest.nodes.length){if(e.canceller.cancelled=!1,e.cancelled[e.nodeIndex])e.results[e.nodeIndex]=null;else{const s=await l(e.searchManyRequest.nodes[e.nodeIndex],e.searchManyRequest.depth,e.canceller);s&&s.bestChild&&!e.cancelled[e.nodeIndex]?(s.bestChild.parent=null,e.results[e.nodeIndex]=s):e.results[e.nodeIndex]=null}++e.nodeIndex}else{d.shift();for(let s of e.cancelled)if(!s){postMessage(new u(e.results,e.searchManyRequest.requestID));break}}}E=!1}}(t);break;case n.SEARCH_NARROW:!function(e){for(let s of d)if(s.searchManyRequest.requestID===e.requestID){s.nodeIndex!==e.nodeIndex&&(s.canceller.cancelled=!0);for(let t=s.cancelled.length-1;t>=0;--t)s.cancelled[t]=t!==e.nodeIndex}}(t);break;case n.CANCEL_ALL:!function(){for(let e of d){e.canceller.cancelled=!0;for(let s=e.cancelled.length-1;s>=0;--s)e.cancelled[s]=!0}}()}}})()})();